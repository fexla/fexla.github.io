---
title: 动态属性网络框架-1 前言
author: fexla
date: 2021-11-11
categories: [游戏, 框架设计]
tags: [游戏, 游戏开发, 框架设计, 动态数值网络, 数值, 编程]
---
## 简介

　　我最近设计开发了一个游戏数值框架，我将它命名为动态属性网络（节点是动态属性的动态网络），其作用是用一个可视化的、动态的数值模型，维护多级属性的所有属性之间的**运算关系**，和维护数值载体身上的**一系列数值**。它适用于开发数值属性非常多的游戏，如太吾绘卷、鬼谷八荒、群星。

## 概念解释

　　这里有动态属性网络模型和属性集。

　　那什么是动态属性呢？这里的定义就是这个属性会因为其他某个或某几个属性的变化而变化，就是动态属性。

　　那什么是网络呢？这里指的是每个动态属性为一个节点，节点之间互相连接代表节点之间的运算关系，如此形成的网络（图）。

　　属性网络模型保存了属性之间的运算关系，属性集保存了一系列实际的属性实例，属性集可以看做是一个属性网络模型的实例。属性集要按照某一个模型构建，属性网络模型可以依靠属性之间的运算关系对属性集操作（比如得到某个属性的值）。如果属性集由模型A构建，那么它只能被模型A操作。

　　举个具体的例子就是假设有个“战斗单位”的属性模型，描述了力量和攻击力之间的运算关系（比如力量直接加到攻击力上），玩家A，玩家B，NPC_A，NPC_B都分别有一个属性集，都是按照“战斗单位”这个属性模型构建的，他们的属性集包括力量，攻击力这两个属性。

　　还有一些更具体的功能，比如
- 函数式属性（本身是一个属性模型，用于技能输出的计算）
- 网络依附（一个属性集依附到另一个属性上，用于多对一的关系，比如一个人穿4个装备）
- 属性类型从属（用于一次性影响多个属性，比如群星中一个科技增加2%所有人口的产出）

　　这些功能先放着，之后的文章再详细写。

## 优缺点

这个框架的优点有：

- 可视化编辑属性模型，由节点表示运算关系，比公式直观。

- 可以在每个节点设置缓存，可以空间换时间，减少运算量，尤其对于底层数值不易改变的场景。

- 属性模型可以热更新，即运算公式可以热更新。因为属性模型可以序列化。

- 因为完全用图形化界面，所以属性类型的枚举不用在c#中写，而是用图形化界面操作一个int到类型信息的表。

- 可以直接用字符串指代属性类型而不用写枚举。（因为字符串哈希的运算量，只在中间属性使用并且没有buff附加到它身上才不会影响性能

这个框架的缺点有：

- 网络无法处理循环连接。

- 等实现出来再看有什么缺点。
